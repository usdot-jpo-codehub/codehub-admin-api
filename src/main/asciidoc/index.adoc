:toc: left
:toclevels: 4


= ITS CodeHub

== Admin API
The Admin API of CodeHub has the function to administer the metadata information for the CodeHub Ingestion system. The API connect to an https://www.elastic.co/products/enterprise-search[ElasticSearch] storage system


== Header token validation
The API is expeting to receive a TOKEN in the header under the name CHTOKEN. This value needs to be provided as part of the configuration of the API.
Failing to provide the CHTOKEN will return in UNAUTHORIZED.

include::{snippets}/api/v1/invalid-token/http-response.adoc[]

== Repository

The repository information is presented through an structure (CHRepository) that contains the following properties.

*CHRespository*
[options="header",cols="1,1,2"]
|===
|Name   |Type   |Description
//-------------
|*id*   |String   |Unique hash ID
|*name*   |String   |Name of the repository.
|*owner*   |String   |Owner of the repository.
|*url*   |String   |URL/Link to the repository.
|*etag*   |String   |Hash value that allows to detect whether the repository has changes.
|*source*   |String   |Repository source (GitHub)
|*last_modified*   |Timestamp   |Last time that a repository document was modified.
|*last_ingested*   |Timestamp   |Last time that the repository was ingested.
|*enabled*   |Boolean   |If TRUE the repository will be consider for Ingestion.
|===

=== List Repositories
Gets a list of all the Repositories

==== Request
include::{snippets}/api/v1/repositories/get-data/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/repositories/get-data/curl-request.adoc[]


==== Response

===== Data available
include::{snippets}/api/v1/repositories/get-data/http-response.adoc[]

===== No data available
include::{snippets}/api/v1/repositories/get-no-data/http-response.adoc[]

===== Error
include::{snippets}/api/v1/repositories/get-error/http-response.adoc[]

=== Add Repository
Adds a Repository.

==== Request
include::{snippets}/api/v1/repositories/add-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/repositories/add-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/repositories/add-ok/http-response.adoc[]

===== Conflict
include::{snippets}/api/v1/repositories/add-conflict/http-response.adoc[]

===== Error
include::{snippets}/api/v1/repositories/add-error/http-response.adoc[]


=== Update Repository
Updates a Repository.

==== Request
include::{snippets}/api/v1/repositories/update-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/repositories/update-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/repositories/update-ok/http-response.adoc[]

===== Error
include::{snippets}/api/v1/repositories/update-error/http-response.adoc[]


=== Delete Repository
Delete a Repository.

==== Request
include::{snippets}/api/v1/repositories/deleteOne-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/repositories/deleteOne-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/repositories/deleteOne-ok/http-response.adoc[]

===== Not found
include::{snippets}/api/v1/repositories/deleteOne-not-found/http-response.adoc[]

===== Error
include::{snippets}/api/v1/repositories/deleteOne-error/http-response.adoc[]


=== Delete Multiple Repositories
Delete multiple repositories

==== Request
include::{snippets}/api/v1/repositories/deleteMany-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/repositories/deleteMany-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/repositories/deleteMany-ok/http-response.adoc[]

===== Error
include::{snippets}/api/v1/repositories/deleteMany-error/http-response.adoc[]


=== Reset Cache
Reset Repository Cache.

==== Request
include::{snippets}/api/v1/repositories/resetcache-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/repositories/resetcache-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/repositories/resetcache-ok/http-response.adoc[]

===== Error
include::{snippets}/api/v1/repositories/resetcache-error/http-response.adoc[]


== Project

The project information is presented through an structure (CHProject) that contains the following properties.

*CHProject*
[options="header",cols="1,1,2"]
|===
|Name   |Type   |Description
//-------------
|*id*   |String   |Unique hash ID
|*repository_url*   |String   |URL/Link to the repository.
|*badges*   |CHProjectBadges   |Structure that contains the badges information.
|===

*CHProjectBadges*
[options="header",cols="1,1,2"]
|===
|Name   |Type   |Description
//-------------
|*status*   |String   |Status badge
|===

=== List Projects
Gets a list of all the available projects.

==== Request
include::{snippets}/api/v1/projects/get-data/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/projects/get-data/curl-request.adoc[]


==== Response

===== Data available
include::{snippets}/api/v1/projects/get-data/http-response.adoc[]

===== No data available
include::{snippets}/api/v1/projects/get-no-data/http-response.adoc[]

===== Error
include::{snippets}/api/v1/projects/get-error/http-response.adoc[]

=== Add Project
Adds a Project.

==== Request
include::{snippets}/api/v1/projects/add-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/projects/add-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/projects/add-ok/http-response.adoc[]

===== Conflict
include::{snippets}/api/v1/projects/add-conflict/http-response.adoc[]

===== Error
include::{snippets}/api/v1/projects/add-error/http-response.adoc[]


=== Update Project
Updates a Project.

==== Request
include::{snippets}/api/v1/projects/update-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/projects/update-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/projects/update-ok/http-response.adoc[]

===== Error
include::{snippets}/api/v1/projects/update-error/http-response.adoc[]


=== Delete Project
Delete a Project.

==== Request
include::{snippets}/api/v1/projects/deleteOne-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/projects/deleteOne-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/projects/deleteOne-ok/http-response.adoc[]

===== Not found
include::{snippets}/api/v1/projects/deleteOne-not-found/http-response.adoc[]

===== Error
include::{snippets}/api/v1/projects/deleteOne-error/http-response.adoc[]


=== Delete Multiple Projects
Delete multiple Projects

==== Request
include::{snippets}/api/v1/projects/deleteMany-ok/http-request.adoc[]

===== cURL Sample
include::{snippets}/api/v1/projects/deleteMany-ok/curl-request.adoc[]


==== Response

===== Success
include::{snippets}/api/v1/projects/deleteMany-ok/http-response.adoc[]

===== Error
include::{snippets}/api/v1/projects/deleteMany-error/http-response.adoc[]

